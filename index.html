<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í‚¤ì˜¤ìŠ¤í¬ ì£¼ë¬¸ ì‹œìŠ¤í…œ</title>
    <!-- Tailwind CSS ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ê¸°ë³¸ ê¸€ê¼´ ì„¤ì • ë° ì „ì²´ í™”ë©´ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            touch-action: manipulation; /* í„°ì¹˜ í™˜ê²½ ìµœì í™” */
        }
        /* ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¥¸ 3840px ê³ ì • ì„¸ë¡œ ë†’ì´ ì ìš© */
        .kiosk-height {
            height: 3840px; 
            min-height: 3840px;
        }

        /* í•­ëª© ë²„íŠ¼ì— í˜¸ë²„/ì•¡í‹°ë¸Œ íš¨ê³¼ ì¶”ê°€ */
        .item-card {
            transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
            cursor: pointer;
        }
        .item-card:active {
            transform: scale(0.98);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        /* í‚¤ì˜¤ìŠ¤í¬ í™˜ê²½ì— ë§ê²Œ ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ */
        .scroll-area::-webkit-scrollbar {
            display: none;
        }
        .scroll-area {
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }
        /* í•˜ë‹¨ ì¥ë°”êµ¬ë‹ˆ ì˜ì—­ ê³ ì • */
        .footer-cart {
            height: 120px; /* ì¶©ë¶„í•œ ë†’ì´ í™•ë³´ */
        }
        /* í° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .kiosk-btn {
            padding: 2rem 1.5rem; /* í„°ì¹˜ ì˜ì—­ ìµœëŒ€í™” */
            font-size: 1.5rem;
            font-weight: bold;
        }
    </style>
</head>
<body class="kiosk-height flex flex-col">

    <!-- 1. ìƒë‹¨ í—¤ë”: ë¡œê³  ë° ì „ì—­ ì„¤ì • -->
    <header class="bg-white shadow-md p-4 flex justify-between items-center z-10">
        <div class="text-4xl font-extrabold text-blue-600">
            ì£¼ë¬¸ í‚¤ì˜¤ìŠ¤í¬
        </div>
        <div class="flex space-x-4">
            <!-- ì–¸ì–´ ì„ íƒ ë“± í° ë²„íŠ¼ -->
            <button class="kiosk-btn bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 text-lg">
                ì–¸ì–´
            </button>
            <button onclick="resetOrder()" class="kiosk-btn bg-red-100 text-red-600 rounded-xl hover:bg-red-200 text-lg">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7 1.5a.75.75 0 00-.75-.75h-7.5a.75.75 0 00-.75.75v7.5a.75.75 0 00.75.75h7.5a.75.75 0 00.75-.75v-7.5z" />
                </svg>
                ì²˜ìŒìœ¼ë¡œ
            </button>
        </div>
    </header>

    <!-- 2. ë©”ì¸ ì½˜í…ì¸  ì˜ì—­: ì¹´í…Œê³ ë¦¬ + ë©”ë‰´íŒ -->
    <main class="flex-grow flex overflow-hidden">
        
        <!-- ì™¼ìª½: ì¹´í…Œê³ ë¦¬ ë©”ë‰´ (ê³ ì • í­) -->
        <nav class="w-1/5 bg-gray-50 border-r border-gray-200 p-4 flex flex-col space-y-4 scroll-area overflow-y-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">ì¹´í…Œê³ ë¦¬</h2>
            <!-- ì¹´í…Œê³ ë¦¬ ë²„íŠ¼: í¬ê³  ëª…í™•í•˜ê²Œ -->
            <button class="kiosk-btn bg-blue-600 text-white rounded-xl shadow-lg" data-category="coffee">â˜• ì»¤í”¼</button>
            <button class="kiosk-btn bg-white text-gray-700 border-2 border-gray-200 rounded-xl hover:bg-gray-100" data-category="tea">ğŸ«– í‹°</button>
            <button class="kiosk-btn bg-white text-gray-700 border-2 border-gray-200 rounded-xl hover:bg-gray-100" data-category="ade">ğŸ¹ ì—ì´ë“œ/ì£¼ìŠ¤</button>
            <button class="kiosk-btn bg-white text-gray-700 border-2 border-gray-200 rounded-xl hover:bg-gray-100" data-category="bakery">ğŸ¥ ë² ì´ì»¤ë¦¬</button>
            <button class="kiosk-btn bg-white text-gray-700 border-2 border-gray-200 rounded-xl hover:bg-gray-100" data-category="seasonal">ğŸ“ ì‹œì¦Œ ë©”ë‰´</button>
        </nav>

        <!-- ì˜¤ë¥¸ìª½: ë©”ë‰´ í•­ëª© ê·¸ë¦¬ë“œ (ìœ ë™ í­) -->
        <section id="menu-items" class="flex-grow p-6 grid grid-cols-3 gap-6 content-start scroll-area overflow-y-auto">
            <!-- ë©”ë‰´ í•­ëª©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </section>
        
    </main>

    <!-- 3. í•˜ë‹¨ í‘¸í„°: ì£¼ë¬¸ ìš”ì•½ ë° ê²°ì œ ë²„íŠ¼ (ê³ ì •) -->
    <footer class="footer-cart bg-gray-800 text-white p-4 flex justify-between items-center sticky bottom-0 z-20">
        <div id="cart-summary" class="flex flex-col">
            <span class="text-2xl font-medium">ì´ í•­ëª©: <span id="item-count" class="font-extrabold text-yellow-400">0</span>ê°œ</span>
            <span class="text-4xl font-bold mt-1">ì´ ê¸ˆì•¡: <span id="total-price" class="font-extrabold text-yellow-400">0</span>ì›</span>
        </div>
        
        <!-- ê²°ì œ ë²„íŠ¼: ê°€ì¥ í¬ê³  ëˆˆì— ë„ê²Œ -->
        <button id="checkout-button" onclick="checkout()" disabled class="kiosk-btn bg-green-500 text-white rounded-xl shadow-2xl hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed">
            ì£¼ë¬¸í•˜ê¸° / ê²°ì œ (0)
        </button>
    </footer>

    <script>
        // Firebase ë° API í‚¤ëŠ” í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ ì œê³µë©ë‹ˆë‹¤.
        const apiKey = "";
        
        // --- ë”ë¯¸ ë°ì´í„° (ì‹¤ì œë¡œëŠ” Firestoreì—ì„œ ê°€ì ¸ì˜´) ---
        // 3840px ë†’ì´ë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ ë”ë¯¸ ë°ì´í„°ë¥¼ ë” ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
        const menuData = [
            { id: 1, name: "ì•„ë©”ë¦¬ì¹´ë…¸", category: "coffee", price: 4500, img: "https://placehold.co/150x150/000/fff?text=Ame" },
            { id: 2, name: "ì¹´í˜ ë¼ë–¼", category: "coffee", price: 5000, img: "https://placehold.co/150x150/8B4513/fff?text=Latte" },
            { id: 3, name: "ì¹´ë¼ë©œ ë§ˆí‚¤ì•„ë˜", category: "coffee", price: 5500, img: "https://placehold.co/150x150/FF8C00/fff?text=Cara" },
            { id: 4, name: "ì–¼ê·¸ë ˆì´", category: "tea", price: 4000, img: "https://placehold.co/150x150/3CB371/fff?text=Earl" },
            { id: 5, name: "ë ˆëª¬ ì—ì´ë“œ", category: "ade", price: 6000, img: "https://placehold.co/150x150/FFD700/000?text=Lemon" },
            { id: 6, name: "í¬ë¡œì™€ìƒ", category: "bakery", price: 3500, img: "https://placehold.co/150x150/F08080/fff?text=Croi" },
            { id: 7, name: "ë°”ë‹ë¼ ë”œë¼ì´íŠ¸", category: "coffee", price: 5500, img: "https://placehold.co/150x150/D2B48C/000?text=Vani" },
            // ì„¸ë¡œ ê¸¸ì´ê°€ ê¸¸ì–´ì§„ ë§Œí¼ ë” ë§ì€ ë©”ë‰´ë¥¼ ê°€ì •í•˜ì—¬ ì¶”ê°€
            { id: 8, name: "ì´ˆì½” ë¨¸í•€", category: "bakery", price: 4000, img: "https://placehold.co/150x150/654321/fff?text=Muffin" },
            { id: 9, name: "ìŠ¤íŠ¸ë¡œë² ë¦¬ ìŠ¤ë¬´ë””", category: "seasonal", price: 7000, img: "https://placehold.co/150x150/FF69B4/fff?text=Smoothie" },
            { id: 10, name: "ë¯¼íŠ¸ ì´ˆì½” ë¼ë–¼", category: "coffee", price: 5200, img: "https://placehold.co/150x150/008080/fff?text=Mint" },
            { id: 11, name: "í˜í¼ë¯¼íŠ¸ í‹°", category: "tea", price: 4200, img: "https://placehold.co/150x150/8FBC8F/000?text=Pepp" },
            { id: 12, name: "ìëª½ ì—ì´ë“œ", category: "ade", price: 6500, img: "https://placehold.co/150x150/FFA07A/000?text=Grape" },
            { id: 13, name: "í—ˆë‹ˆ ë¸Œë ˆë“œ", category: "bakery", price: 5000, img: "https://placehold.co/150x150/DAA520/000?text=Bread" },
            { id: 14, name: "ì½œë“œ ë¸Œë£¨", category: "coffee", price: 5000, img: "https://placehold.co/150x150/4682B4/fff?text=Cold" },
            { id: 15, name: "ë…¹ì°¨ ë¼ë–¼", category: "tea", price: 4800, img: "https://placehold.co/150x150/006400/fff?text=Green" },
            { id: 16, name: "ë§ê³  ì£¼ìŠ¤", category: "ade", price: 7500, img: "https://placehold.co/150x150/FFDAB9/000?text=Mango" },
            { id: 17, name: "ì¹˜ì¦ˆ ì¼€ì´í¬", category: "bakery", price: 6000, img: "https://placehold.co/150x150/F0E68C/000?text=Cheese" },
            { id: 18, name: "í—¤ì´ì¦ë„› ì•„ë©”ë¦¬ì¹´ë…¸", category: "coffee", price: 5000, img: "https://placehold.co/150x150/A0522D/fff?text=Haze" },
            { id: 19, name: "ë¸”ë™ í‹°", category: "tea", price: 4000, img: "https://placehold.co/150x150/696969/fff?text=Black" },
            { id: 20, name: "ìˆ˜ë°• ì£¼ìŠ¤", category: "seasonal", price: 7000, img: "https://placehold.co/150x150/FF4500/fff?text=Water" },
            { id: 21, name: "ìº¬ë¼ë©œ íŒì½˜", category: "bakery", price: 4500, img: "https://placehold.co/150x150/E9967A/000?text=Popc" },
        ];

        let currentOrder = [];
        const menuItemsContainer = document.getElementById('menu-items');
        const itemCountSpan = document.getElementById('item-count');
        const totalPriceSpan = document.getElementById('total-price');
        const checkoutButton = document.getElementById('checkout-button');

        // --- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---

        // ê¸ˆì•¡ì„ ì›í™” í¬ë§·ìœ¼ë¡œ ë³€í™˜
        function formatPrice(price) {
            return price.toLocaleString('ko-KR') + 'ì›';
        }

        // --- UI ë Œë”ë§ í•¨ìˆ˜ ---

        // ë©”ë‰´ í•­ëª©ì„ ì¹´ë“œ í˜•íƒœë¡œ ë Œë”ë§
        function renderMenuItems(category) {
            menuItemsContainer.innerHTML = ''; // ê¸°ì¡´ í•­ëª© ì´ˆê¸°í™”
            
            const filteredItems = category === 'all' 
                ? menuData 
                : menuData.filter(item => item.category === category);

            if (filteredItems.length === 0) {
                // ê¸´ í™”ë©´ì— ë§ê²Œ í…ìŠ¤íŠ¸ í¬ê¸° ì¦ê°€
                menuItemsContainer.innerHTML = `<p class="text-5xl text-gray-500 col-span-3 mt-40 text-center">ì„ íƒí•˜ì‹  ì¹´í…Œê³ ë¦¬ì— í˜„ì¬ ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
                return;
            }

            filteredItems.forEach(item => {
                const card = document.createElement('div');
                card.className = 'item-card bg-white rounded-3xl shadow-2xl p-6 text-center border-4 border-transparent hover:border-blue-500 transition-all'; // ì¹´ë“œ ë””ìì¸ ì•½ê°„ í‚¤ì›€
                card.onclick = () => addItemToOrder(item);

                card.innerHTML = `
                    <img src="${item.img}" onerror="this.onerror=null; this.src='https://placehold.co/200x200/ccc/000?text=No+Img';" class="w-full h-auto object-cover rounded-xl mb-6 mx-auto" alt="${item.name}">
                    <h3 class="text-4xl font-bold text-gray-900 truncate">${item.name}</h3>
                    <p class="text-3xl font-extrabold text-red-600 mt-4">${formatPrice(item.price)}</p>
                    <div class="mt-4 text-2xl text-gray-500">í„°ì¹˜í•˜ì—¬ ì¶”ê°€</div>
                `;
                menuItemsContainer.appendChild(card);
            });
        }

        // ì¥ë°”êµ¬ë‹ˆ ìš”ì•½ ì—…ë°ì´íŠ¸
        function updateCartSummary() {
            const totalCount = currentOrder.length;
            const totalPrice = currentOrder.reduce((sum, item) => sum + item.price, 0);

            itemCountSpan.textContent = totalCount;
            totalPriceSpan.textContent = formatPrice(totalPrice);
            checkoutButton.textContent = `ì£¼ë¬¸í•˜ê¸° / ê²°ì œ (${totalCount})`;
            
            // ì£¼ë¬¸ì´ ìˆìœ¼ë©´ ê²°ì œ ë²„íŠ¼ í™œì„±í™”
            checkoutButton.disabled = totalCount === 0;
            if (totalCount > 0) {
                checkoutButton.classList.remove('bg-gray-500');
                checkoutButton.classList.add('bg-green-500');
            } else {
                checkoutButton.classList.remove('bg-green-500');
                checkoutButton.classList.add('bg-gray-500');
            }
        }

        // --- ìƒí˜¸ ì‘ìš© í•¨ìˆ˜ ---

        // í•­ëª© ì¶”ê°€ (í‚¤ì˜¤ìŠ¤í¬ëŠ” ë³´í†µ ìƒì„¸ ì˜µì…˜ ì—†ì´ ë¹ ë¥´ê²Œ ì¶”ê°€)
        function addItemToOrder(item) {
            // ì‹¤ì œ í‚¤ì˜¤ìŠ¤í¬ì—ì„œëŠ” ì—¬ê¸°ì„œ ì˜µì…˜ ëª¨ë‹¬ì„ ë„ìš°ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ê¸°ë³¸ í•­ëª©ë§Œ ì¶”ê°€
            currentOrder.push(item);
            updateCartSummary();
            showTemporaryMessage(`${item.name} (ì´/ê°€) ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'green');
        }

        // ê²°ì œ ë²„íŠ¼ í´ë¦­ ì‹œ (ì‹¤ì œë¡œëŠ” ê²°ì œ í™”ë©´ìœ¼ë¡œ ì´ë™)
        function checkout() {
            if (currentOrder.length === 0) {
                showTemporaryMessage('ì£¼ë¬¸ í•­ëª©ì„ ë¨¼ì € ì„ íƒí•´ ì£¼ì„¸ìš”.', 'red');
                return;
            }
            // ì„ì‹œ ë©”ì‹œì§€ ì°½ ëŒ€ì‹  ì»¤ìŠ¤í…€ ëª¨ë‹¬ ì‚¬ìš©
            showOrderModal();
        }

        // ì£¼ë¬¸ ì´ˆê¸°í™”
        function resetOrder() {
            currentOrder = [];
            updateCartSummary();
            showTemporaryMessage('ì£¼ë¬¸ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'red');
        }

        // ì¹´í…Œê³ ë¦¬ ì„ íƒ í•¸ë“¤ëŸ¬
        function handleCategorySelect(event) {
            const categoryButtons = document.querySelectorAll('nav button');
            categoryButtons.forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white', 'border-2', 'border-gray-200');
                btn.classList.add('bg-white', 'text-gray-700', 'border-2', 'border-gray-200', 'hover:bg-gray-100');
            });

            event.target.classList.remove('bg-white', 'text-gray-700', 'border-2', 'border-gray-200', 'hover:bg-gray-100');
            event.target.classList.add('bg-blue-600', 'text-white', 'shadow-lg');

            const category = event.target.dataset.category;
            renderMenuItems(category);
        }

        // --- ëª¨ë‹¬ ë° ë©”ì‹œì§€ UI (alert/confirm ëŒ€ì²´) ---
        
        // ì„ì‹œ ë©”ì‹œì§€ í‘œì‹œ
        function showTemporaryMessage(message, type) {
            const messageBox = document.createElement('div');
            // ê¸´ í™”ë©´ì—ì„œë„ ì˜ ë³´ì´ë„ë¡ top ìœ„ì¹˜ ì¡°ì • ë° í…ìŠ¤íŠ¸ í¬ê¸° ì¦ê°€
            messageBox.className = `fixed top-60 right-1/2 translate-x-1/2 p-6 text-4xl font-bold rounded-2xl shadow-2xl z-50 transition-opacity duration-300 ${type === 'red' ? 'bg-red-500' : 'bg-green-500'} text-white`;
            messageBox.textContent = message;
            document.body.appendChild(messageBox);
            
            setTimeout(() => {
                messageBox.classList.add('opacity-0');
                messageBox.addEventListener('transitionend', () => messageBox.remove());
            }, 2000);
        }

        // ì£¼ë¬¸ í™•ì¸ ëª¨ë‹¬ (ê²°ì œ í™”ë©´ ëŒ€ì²´)
        function showOrderModal() {
            const total = currentOrder.reduce((sum, item) => sum + item.price, 0);
            const modalHtml = `
                <div id="order-modal-backdrop" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
                    <div class="bg-white rounded-3xl p-12 w-4/5 max-w-5xl shadow-2xl">
                        <h2 class="text-6xl font-extrabold text-gray-900 mb-8 border-b pb-6">ğŸ§¾ ì£¼ë¬¸ í™•ì¸ ë° ê²°ì œ</h2>
                        <div class="max-h-[50vh] overflow-y-auto mb-8 scroll-area">
                            ${currentOrder.map(item => `
                                <div class="flex justify-between items-center py-5 border-b">
                                    <span class="text-4xl">${item.name}</span>
                                    <span class="text-4xl font-semibold">${formatPrice(item.price)}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="flex justify-between items-center bg-yellow-100 p-8 rounded-xl mb-10">
                            <span class="text-5xl font-bold text-gray-800">ìµœì¢… ê²°ì œ ê¸ˆì•¡</span>
                            <span class="text-6xl font-extrabold text-red-600">${formatPrice(total)}</span>
                        </div>
                        <div class="flex justify-end space-x-8">
                            <button onclick="closeModal()" class="kiosk-btn bg-gray-300 text-gray-800 rounded-xl hover:bg-gray-400 text-2xl">
                                ì·¨ì†Œí•˜ê³  ëŒì•„ê°€ê¸°
                            </button>
                            <button onclick="simulatePayment(true)" class="kiosk-btn bg-green-600 text-white rounded-xl hover:bg-green-700 text-2xl">
                                ì¹´ë“œ ê²°ì œ ì§„í–‰
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }

        function closeModal() {
            document.getElementById('order-modal-backdrop')?.remove();
        }

        function simulatePayment(success) {
            closeModal();
            if (success) {
                showTemporaryMessage('ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì£¼ë¬¸ë²ˆí˜¸: 1004', 'green');
                resetOrder();
            } else {
                showTemporaryMessage('ê²°ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.', 'red');
            }
        }


        // --- ì´ˆê¸°í™” ---
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        document.querySelectorAll('nav button').forEach(button => {
            button.addEventListener('click', handleCategorySelect);
        });

        // ì´ˆê¸° ë¡œë“œ: ì²« ë²ˆì§¸ ì¹´í…Œê³ ë¦¬ í™œì„±í™” ë° ë Œë”ë§
        window.onload = () => {
            const initialCategoryButton = document.querySelector('nav button[data-category="coffee"]');
            if (initialCategoryButton) {
                initialCategoryButton.click(); // 'coffee' ì¹´í…Œê³ ë¦¬ í™œì„±í™”
            } else {
                renderMenuItems('all'); // ë²„íŠ¼ì´ ì—†ìœ¼ë©´ ì „ì²´ ë©”ë‰´ ë¡œë“œ
            }
            updateCartSummary();
        };

    </script>
</body>
</html>